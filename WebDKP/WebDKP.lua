WebDKP_TierInterval=50;WebDKP_Filters={["Druid"]=1,["Hunter"]=1,["Mage"]=1,["Rogue"]=1,["Shaman"]=1,["Paladin"]=1,["Priest"]=1,["Warrior"]=1,["Warlock"]=1,["Group"]=1,["Guild"]=1,["GuildOnline"]=1,["LimitAlts"]=0,["LimitAlts2"]=0,["Standby1"]=1,["Standby2"]=0,["Others"]=0}WebDKP_FilterGroups={["Casters"]="Paladin Shaman Mage Warlock Priest Druid",["Melee"]="Paladin Shaman Warrior Rogue Druid Hunter",["Healer"]="Shaman Paladin Priest Druid",["Chain"]="Shaman Hunter",["Cloth"]="Warlock Mage Priest",["Leather"]="Rogue Druid",["Plate"]="Warrior Paladin"}WebDKP_IgnoreItems={WebDKP.translations.IgnoreItems1,WebDKP.translations.IgnoreItems2}WebDKP_DkpTable={}WebDKP_Loot={}WebDKP_Synch_Users={}WebDKP_RaidInfo={}WebDKP_Ignored_Items={}WebDKP_Tables={}selectedTableid=1;WebDKP_DkpTableToShow={}WebDKP_PlayersInGroup={}WebDKP_PlayersInGroupStatus={}WebDKP_LogSort={["curr"]=3,["way"]=1,["curr2"]=2,["way2"]=1,["curr3"]=1,["way3"]=2,["curr4"]=4,["way4"]=1}WebDKP_FilterName=nil;WebDKP_Options={["AutoGive"]=0,["AwardBossDKP"]=0,["AwardBossDKP_Include_Standy"]=0,["BossDKPMCAndOLValue"]=0,["BossDKPBWLValue"]=0,["BossDKPTAQValue"]=0,["BossDKPNAXXValue"]=0,["ZeroSumStandby"]=1,["TimedStandby"]=1,["AutofillEnabled"]=1,["AutofillThreshold"]=3,["AutoAwardEnabled"]=1,["SelectedTableId"]=1,["MiniMapButtonAngle"]=1,["BidAnnounceRaid"]=0,["BidConfirmPopup"]=1,["BidAllowNegativeBids"]=0,["BidFixedBidding"]=0,["BidNotifyLowBids"]=0,["TimedAwardRepeat"]=1,["TimedAwardInProgress"]=false,["TimedAwardTimer"]=0,["TimedAwardTotalTime"]=5,["TimedAwardDkp"]=0,["SynchPassword"]="",["EnableSynch"]=0,["SynchFrom"]="",["Decay"]=1,["TurnBase"]=1,["SilentBidding"]=1,["BidandRoll"]=0,["FiftyGreed"]=0,["NeedAll"]=0,["DisableBid"]=0,["TimedAwardMiniTimer"]=0,["Enabled"]=1,["Announcements"]=0,["EditStartAnnounce"]="",["EditDuringAnnounce"]="",["EditEndAnnounce"]="",["EditSRollAnnounce"]="",["EditRollAnnounce"]="",["EditERollAnnounce"]="",["InGroup"]=1,["LimitGuild"]=1,["LimitGuildOnline"]=1,["LimitAlts"]=0,["LimitAlts2"]=0,["Standby1"]=0,["Standby2"]=0,["StartBid"]=0,["Time"]=0,["AltClick"]=1,["IgnWhispers"]=0,["GreedDKP"]="50",["NeedDKP"]="100",["dkpCap"]=0,["dkpCapLimit"]=0}WebDKP_WebOptions={["ZeroSumEnabled"]=0,["CombineAlts"]=0}WebDKP_Alts={}SLASH_RELOAD1='/rl'SlashCmdList.RELOAD=ReloadUI;local a=false;local b=WebDKP_sign;SG=""function WebDKP_OnLoad(self)local c=self;if a==false then a=true;SlashCmdList["WEBDKP"]=WebDKP_ToggleGUI;SLASH_WEBDKP1="/webdkp"SLASH_SYNCH1="/synch"SlashCmdList["SYNCH"]=WebDKP_Start_Synch;c:RegisterEvent("CHAT_MSG_SYSTEM")c:RegisterEvent("BOSS_KILL")c:RegisterEvent("CHAT_MSG_MONSTER_YELL")c:RegisterEvent("GROUP_ROSTER_UPDATE")c:RegisterEvent("RAID_ROSTER_UPDATE")c:RegisterEvent("ITEM_TEXT_READY")c:RegisterEvent("ADDON_LOADED")c:RegisterEvent("CHAT_MSG_WHISPER")c:RegisterEvent("CHAT_MSG_LOOT")c:RegisterEvent("CHAT_MSG_PARTY")c:RegisterEvent("CHAT_MSG_RAID")c:RegisterEvent("CHAT_MSG_RAID_LEADER")c:RegisterEvent("CHAT_MSG_RAID_WARNING")c:RegisterEvent("ADDON_ACTION_FORBIDDEN")c:RegisterEvent("COMBAT_LOG_EVENT")c:RegisterEvent("CHAT_MSG_ADDON")c:RegisterEvent("ENCOUNTER_START")c:RegisterEvent("ENCOUNTER_END")c:RegisterEvent("ZONE_CHANGED_NEW_AREA")WebDKP_OnEnable()end end;function WebDKP_OnEnable()_G["RivendareFlag"]=0;_G["LadyFlag"]=0;_G["SirFlag"]=0;_G["KorFlag"]=0;_G["Earthbreaker"]=0;_G["WaveBinder"]=0;_G["AwardedReason"]=""_G["AwardedDate"]=""_G["LineLocation"]=""_G["WebDKP_FiltersFrame"]:Show()_G["WebDKP_AwardDKP_Frame"]:Hide()_G["WebDKP_AwardItem_Frame"]:Hide()_G["WebDKP_Standby_Frame"]:Hide()WebDKP_UpdatePlayersInGroup()WebDKP_UpdateTableToShow()hooksecurefunc("SetItemRef",WebDKP_ItemChatClick)hooksecurefunc("ChatFrame_OnHyperlinkShow",WebDKP_ItemChatShiftClick)hooksecurefunc("HandleModifiedItemClick",WebDKP_HandleModifiedItemClick)WebDKP_Tab_OnClick(nil)end;function WebDKP_OnEvent(self,d,...)local e,f,g,h,i,j,k,l,m=...if d=="GROUP_ROSTER_UPDATE"then WebDKP_RAID_ROSTER_UPDATE(e)elseif d=="PARTY_MEMBERS_CHANGED"then WebDKP_PARTY_MEMBERS_CHANGED(e)elseif d=="ADDON_LOADED"then WebDKP_ADDON_LOADED(e)elseif d=="CHAT_MSG_SYSTEM"then Webdkp_Sys_Msg_Received(e)elseif d=="CHAT_MSG_ADDON"then if C_ChatInfo.IsAddonMessagePrefixRegistered("!WDKPA Undo")==false then C_ChatInfo.RegisterAddonMessagePrefix("!WDKPA Undo")elseif C_ChatInfo.IsAddonMessagePrefixRegistered("!WDKPA LogAdd")==false then C_ChatInfo.RegisterAddonMessagePrefix("!WDKPA LogAdd")elseif C_ChatInfo.IsAddonMessagePrefixRegistered("!WDKPA LogDel")==false then C_ChatInfo.RegisterAddonMessagePrefix("!WDKPA LogDel")elseif C_ChatInfo.IsAddonMessagePrefixRegistered("!WDKPA Item")==false then C_ChatInfo.RegisterAddonMessagePrefix("!WDKPA Item")elseif C_ChatInfo.IsAddonMessagePrefixRegistered("!WDKP MultStart")==false then C_ChatInfo.RegisterAddonMessagePrefix("!WDKP Mult Start")elseif C_ChatInfo.IsAddonMessagePrefixRegistered("!WDKP MultName")==false then C_ChatInfo.RegisterAddonMessagePrefix("!WDKP MultName")elseif C_ChatInfo.IsAddonMessagePrefixRegistered("!WDKP Mult End")==false then C_ChatInfo.RegisterAddonMessagePrefix("!WDKP Mult End")end;WebDKP_AddonChan_Processing(e,f,g,h)elseif d=="ZONE_CHANGED_NEW_AREA"then WebDKP_AREA_CHANGED()end;if WebDKP_Options["Enabled"]==1 then if d=="CHAT_MSG_WHISPER"then WebDKP_CHAT_MSG_WHISPER(e,i,select(12,...))elseif d=="CHAT_MSG_PARTY"or d=="CHAT_MSG_RAID"or d=="CHAT_MSG_RAID_LEADER"or d=="CHAT_MSG_RAID_WARNING"then WebDKP_CHAT_MSG_PARTY_RAID(e,i)elseif d=="CHAT_MSG_LOOT"then WebDKP_Loot_Taken(e,i)elseif d=="ADDON_ACTION_FORBIDDEN"then WebDKP_Print(e.."  "..i)elseif d=="BOSS_KILL"then local n,o=e,f;WebDKP_BossAward_PerformAward(n,o)elseif d=="ENCOUNTER_START"then WebDKP_Award_Encounter_Start(e)elseif d=="ENCOUNTER_END"then WebDKP_Award_Encounter_End(e)end end end;function WebDKP_AREA_CHANGED()local p=select(8,GetInstanceInfo())local q=WebDKP.translations.BOSS_MAP[p]~=nil;WebDKP_Register_WhisperHook(q)end;function WebDKP_ADDON_LOADED(e)if e=="WebDKP"then WebDKP_Text()local r=b.new()r:update(_G["WebDKP_Frame".."Website".."Label"]:GetText())if WebDKP_DkpTable==nil then WebDKP_DkpTable={}end;if WebDKP_Loot==nil then WebDKP_Loot={}end;if WebDKP_Synch_Users==nil then WebDKP_Synch_Users={}end;if WebDKP_Ignored_Items==nil then WebDKP_Ignored_Items={}end;if WebDKP_RaidInfo==nil then WebDKP_RaidInfo={}end;numEntries1=getn(WebDKP_IgnoreItems)numEntries2=getn(WebDKP_Ignored_Items)for s=1,numEntries2,1 do itemfoundflag=0;newitemignored=WebDKP_Ignored_Items[s]for t=1,numEntries1,1 do ItemIgnoredName=WebDKP_IgnoreItems[t]if ItemIgnoredName==newitemignored then itemfoundflag=1 end end;if itemfoundflag==0 then numEntries1=numEntries1+1;tinsert(WebDKP_IgnoreItems,newitemignored)end end;local u=false;if WebDKP_Tables~=nil and next(WebDKP_Tables)~=nil then for v,w in pairs(WebDKP_Tables)do if type(w)=="table"then u=WebDKP_Options["SelectedTableId"]==w["id"]if u then break end end end end;if not u then WebDKP_Options["SelectedTableId"]=1 end;WebDKP_Frame.selectedTableid=WebDKP_Options["SelectedTableId"]WebDKP_Options_Init()WebDKP_UpdateTableToShow()WebDKP_UpdateTable()WebDKP_UpdateLogTable()WebDKP_MinimapButton_SetPositionAngle(WebDKP_Options["MiniMapButtonAngle"])r:update(tostring(WebDKP_WebOptions["User"]))r:update(tostring(WebDKP_WebOptions["AddonVersion"]))local x;for y,z in pairs(WebDKP_Tables)do if z["id"]==1 then x=y end end;r:update(tostring(x))SG=b.tohex(r:finish())end end;function WebDKP_OnDisable()end;function WebDKP_ToggleGUI(A,B)local C=0;local D=A;if string.find(D,"ignore")==1 and string.find(D,"list")==8 then local E=UnitName("player")numEntries=getn(WebDKP_Ignored_Items)SendChatMessage("WebDKP: User Defined Ignored Items:","WHISPER",nil,E)for t=1,numEntries,1 do itemignored=WebDKP_Ignored_Items[t]SendChatMessage("WebDKP: Item Ignored ="..itemignored,"WHISPER",nil,E)end end;if string.find(D,"ignore")==1 and string.find(D,"add")==8 then nameofitem=string.gsub(D,"ignore add ","")if nameofitem~=nil and nameofitem~=""then tinsert(WebDKP_IgnoreItems,nameofitem)tinsert(WebDKP_Ignored_Items,nameofitem)end end;if string.find(D,"ignore")==1 and string.find(D,"del")==8 then nameofitem=string.gsub(D,"ignore del ","")if nameofitem~=nil and nameofitem~=""then numEntries1=getn(WebDKP_IgnoreItems)for t=1,numEntries1,1 do local F=WebDKP_IgnoreItems[t]if F==nameofitem then tremove(WebDKP_IgnoreItems,t)end end;numEntries2=getn(WebDKP_Ignored_Items)for t=1,numEntries2,1 do local F=WebDKP_Ignored_Items[t]if F==nameofitem then tremove(WebDKP_Ignored_Items,t)end end end end;if string.find(D,"show")==1 and string.find(D,"table")==6 then if WebDKP_Frame:IsShown()then WebDKP_Frame:Hide()else WebDKP_Frame:Show()WebDKP_FrameScrollFrame:Show()WebDKP_FrameName:Show()WebDKP_FrameClass:Show()WebDKP_FrameDKP:Show()WebDKP_FrameGuildRank:Show()for t=1,22,1 do local G=getglobal("WebDKP_FrameLine"..t)G:Show()end;WebDKP_Tables_DropDown_OnLoad()end end;if string.find(D,"show")==1 and string.find(D,"bidding")==6 then if WebDKP_BidFrame:IsShown()then WebDKP_BidFrame:Hide()else WebDKP_BidFrame:Show()end end;if string.find(D,"show")==1 and string.find(D,"synch")==6 then if WebDKP_SynchFrame:IsShown()then WebDKP_SynchFrame:Hide()else WebDKP_SynchFrame:Show()end end;if string.find(D,"show")==1 and string.find(D,"options")==6 then if WebDKP_OptionsFrame:IsShown()then WebDKP_OptionsFrame:Hide()else WebDKP_OptionsFrame:Show()end end;if string.find(D,"show")==1 and string.find(D,"timed")==6 then if WebDKP_TimedAwardFrame:IsShown()then WebDKP_TimedAwardFrame:Hide()else WebDKP_TimedAwardFrame:Show()end end;if string.find(D,"show")==1 and string.find(D,"help")==6 then if WebDKP_HelpFrame:IsShown()then WebDKP_HelpFrame:Hide()else WebDKP_HelpFrame:Show()end end;if string.find(D,"show")==1 and string.find(D,"log")==6 then if WebDKP_LogFrame:IsShown()then WebDKP_LogFrame:Hide()else WebDKP_LogFrame:Show()end end;if string.find(D,"show")==1 and string.find(D,"raidlog")==6 then if WebDKP_RaidInfoFrame:IsShown()then WebDKP_RaidInfoFrame:Hide()else WebDKP_RaidInfoFrame:Show()end end;if string.find(D,"show")==1 and string.find(D,"charlog")==6 then if WebDKP_CharRaidInfoFrame:IsShown()then WebDKP_CharRaidInfoFrame:Hide()else WebDKP_CharRaidInfoFrame:Show()end end;if string.find(D,"start")==1 and string.find(D,"raid")==7 then WebDKP_RaidStart()end;if string.find(D,"end")==1 and string.find(D,"raid")==5 then WebDKP_RaidEnd()end end;function WebDKP_Table_GUI()if WebDKP_Frame:IsShown()then WebDKP_Frame:Hide()else WebDKP_Frame:Show()WebDKP_FrameScrollFrame:Show()WebDKP_FrameName:Show()WebDKP_FrameClass:Show()WebDKP_FrameDKP:Show()WebDKP_FrameGuildRank:Show()WebDKP_Tables_DropDown_OnLoad()end end;function WebDKP_OPEN_MASTER_LOOT_LIST()end;function WebDKP_PARTY_MEMBERS_CHANGED()WebDKP_UpdatePlayersInGroup()WebDKP_UpdateTableToShow()WebDKP_UpdateTable()end;function WebDKP_RAID_ROSTER_UPDATE()WebDKP_UpdatePlayersInGroup()WebDKP_UpdateTableToShow()WebDKP_UpdateTable()end;function WebDKP_CHAT_MSG_WHISPER(e,f,H)local I=WebDKP_Options["IgnWhispers"]local J=0;if I==1 then local name=f;if WebDKP_PlayerInGroup(name)==false then J=1 end end;if J==0 then WebDKP_WhisperDKP_Event(e,f,H)WebDKP_Bid_Event(e,f,true)WebDKP_Synch_Processing(e,f)end end;function WebDKP_CHAT_MSG_PARTY_RAID(e,f)WebDKP_Bid_Event(e,f,false)end;function WebDKP_Refresh()WebDKP_UpdatePlayersInGroup()WebDKP_UpdateTableToShow()WebDKP_UpdateTable()end;function WebDKP_Tab_OnClick(self)local c=self;if not c then c=WebDKP_FrameTab1 else PlaySound(841)end;tabs={["WebDKP_FiltersFrame"]=WebDKP_FrameTab1,["WebDKP_AwardDKP_Frame"]=WebDKP_FrameTab2,["WebDKP_AwardItem_Frame"]=WebDKP_FrameTab3,["WebDKP_Standby_Frame"]=WebDKP_FrameTab4}for y,z in pairs(tabs)do if z==c then PanelTemplates_SelectTab(z)_G[y]:Show()else PanelTemplates_DeselectTab(z)_G[y]:Hide()end end end;function WebDKP_SelectAll()local K=WebDKP_GetTableid()for y,z in pairs(WebDKP_DkpTable)do if type(z)=="table"then local L=y;local M=z["class"]local N=z["dkp"..K]if N==nil then z["dkp"..K]=0;N=0 end;local O=floor((N-1)/WebDKP_TierInterval)if WebDKP_ShouldDisplay(L,M,N,O)then WebDKP_DkpTable[L]["Selected"]=true else WebDKP_DkpTable[L]["Selected"]=false end end end;WebDKP_UpdateTable()WebDKP_UpdateSelectPlayerCount()end;function WebDKP_UnselectAll()for y,z in pairs(WebDKP_DkpTable)do if type(z)=="table"then local L=y;WebDKP_DkpTable[L]["Selected"]=false end end;WebDKP_UpdateTable()WebDKP_UpdateSelectPlayerCount()end;function WebDKP_UpdateFilterGroupsCheckedState()for v,P in pairs(WebDKP_FilterGroups)do if P~=nil then local Q=_G["WebDKP_FiltersFrameClass"..v]if Q~=nil then local R=WebDKP_AllFiltersOn(P)Q:SetChecked(R==1)end end end end;function WebDKP_ReinforceCheckedFilterGroups()for v,P in pairs(WebDKP_FilterGroups)do if P~=nil then local Q=_G["WebDKP_FiltersFrameClass"..v]if Q~=nil then local S=Q:GetChecked()if S==1 then WebDKP_SetFilterGroupState(P,1)end end end end end;function WebDKP_ToggleFilter(T)WebDKP_Filters[T]=abs(WebDKP_Filters[T]-1)WebDKP_UpdateTableToShow()WebDKP_UpdateTable()WebDKP_UpdateFilterGroupsCheckedState()end;function WebDKP_CheckAllFilters()WebDKP_SetFilterState("Druid",1)WebDKP_SetFilterState("Hunter",1)WebDKP_SetFilterState("Mage",1)WebDKP_SetFilterState("Rogue",1)WebDKP_SetFilterState("Shaman",1)WebDKP_SetFilterState("Paladin",1)WebDKP_SetFilterState("Priest",1)WebDKP_SetFilterState("Warrior",1)WebDKP_SetFilterState("Warlock",1)WebDKP_UpdateTableToShow()WebDKP_UpdateTable()WebDKP_UpdateFilterGroupsCheckedState()end;function WebDKP_UncheckAllFilters()WebDKP_SetFilterState("Druid",0)WebDKP_SetFilterState("Hunter",0)WebDKP_SetFilterState("Mage",0)WebDKP_SetFilterState("Rogue",0)WebDKP_SetFilterState("Shaman",0)WebDKP_SetFilterState("Paladin",0)WebDKP_SetFilterState("Priest",0)WebDKP_SetFilterState("Warrior",0)WebDKP_SetFilterState("Warlock",0)WebDKP_UpdateTableToShow()WebDKP_UpdateTable()WebDKP_UpdateFilterGroupsCheckedState()end;function WebDKP_ToggleFilterGroup(U)local V=WebDKP_FilterGroups[U]local Q=_G["WebDKP_FiltersFrameClass"..U]local S=Q:GetChecked()if S then WebDKP_SetFilterGroupState(V,1)else WebDKP_SetFilterGroupState(V,0)end;WebDKP_UpdateTableToShow()WebDKP_UpdateTable()WebDKP_ReinforceCheckedFilterGroups()end;function WebDKP_AllFiltersOn(V)local W={}W["Druid"]=string.find(string.lower(V),"druid")W["Hunter"]=string.find(string.lower(V),"hunter")W["Mage"]=string.find(string.lower(V),"mage")W["Rogue"]=string.find(string.lower(V),"rogue")W["Shaman"]=string.find(string.lower(V),"shaman")W["Paladin"]=string.find(string.lower(V),"paladin")W["Priest"]=string.find(string.lower(V),"priest")W["Warrior"]=string.find(string.lower(V),"warrior")W["Warlock"]=string.find(string.lower(V),"warlock")local X=true;for v,P in pairs(W)do if P~=nil then if WebDKP_Filters[v]==0 then X=false end end end;return X end;function WebDKP_SetFilterGroupState(V,Y)local W={}W["Druid"]=string.find(string.lower(V),"druid")W["Hunter"]=string.find(string.lower(V),"hunter")W["Mage"]=string.find(string.lower(V),"mage")W["Rogue"]=string.find(string.lower(V),"rogue")W["Shaman"]=string.find(string.lower(V),"shaman")W["Paladin"]=string.find(string.lower(V),"paladin")W["Priest"]=string.find(string.lower(V),"priest")W["Warrior"]=string.find(string.lower(V),"warrior")W["Warlock"]=string.find(string.lower(V),"warlock")for v,P in pairs(W)do if P~=nil then WebDKP_SetFilterState(v,Y)end end end;function WebDKP_SetFilterState(W,Y)xmlName=string.gsub(W," ","_")local Z=_G["WebDKP_FiltersFrameClass"..xmlName]Z:SetChecked(Y==1)WebDKP_Filters[W]=Y end;function WebDPK2_SortBy(a0)if WebDKP_LogSort["curr"]==a0 then WebDKP_LogSort["way"]=abs(WebDKP_LogSort["way"]-1)else WebDKP_LogSort["curr"]=a0;WebDKP_LogSort["way"]=0 end;WebDKP_UpdateTable(true)end;function WebDKP_HandleMouseOver(self)local c=self;local L=_G[c:GetName().."Name"]:GetText()if L~=nil and not WebDKP_DkpTable[L]["Selected"]then _G[c:GetName().."Background"]:SetVertexColor(0.2,0.2,0.7,0.5)end end;function WebDKP_HandleMouseOverLog(self)local c=self;if WebDKP_Log~=nil then local a1=_G[c:GetName().."Date"]:GetText()local a2=_G[c:GetName().."Reason"]:GetText()local _,a3,a4=WebDKP_GetItemInfo(a2)a2=a3;local a5=a2 .." "..a1;if WebDKP_Log[a5]~=nil and not WebDKP_Log[a5]["selected"]then _G[c:GetName().."Background"]:SetVertexColor(0.2,0.2,0.7,0.5)end end end;function WebDKP_HandleMouseLeaveLog(self)local c=self;if WebDKP_Log~=nil then local a1=_G[c:GetName().."Date"]:GetText()local a2=_G[c:GetName().."Reason"]:GetText()local _,a3,a4=WebDKP_GetItemInfo(a2)a2=a3;local a5=a2 .." "..a1;if WebDKP_Log[a5]~=nil and not WebDKP_Log[a5]["selected"]then _G[c:GetName().."Background"]:SetVertexColor(0,0,0,0)end end end;function WebDKP_HandleMouseLeave(self)local c=self;local L=_G[c:GetName().."Name"]:GetText()if L~=nil and not WebDKP_DkpTable[L]["Selected"]then _G[c:GetName().."Background"]:SetVertexColor(0,0,0,0)end end;function WebDKP_SelectPlayerToggle(self)local c=self;local L=_G[c:GetName().."Name"]:GetText()if L~=nil then if WebDKP_DkpTable[L]["Selected"]then WebDKP_DkpTable[L]["Selected"]=false;_G[c:GetName().."Background"]:SetVertexColor(0.2,0.2,0.7,0.5)else WebDKP_DkpTable[L]["Selected"]=true;_G[c:GetName().."Background"]:SetVertexColor(0.1,0.1,0.9,0.8)end end;WebDKP_UpdateSelectPlayerCount()end;function WebDKP_UpdateSelectPlayerCount()local numEntries=table.getn(WebDKP_DkpTableToShow)local a6=0;local a7=0;for _,z in pairs(WebDKP_DkpTableToShow)do local a8=WebDKP_DkpTable[z.playerName]if a8~=nil and a8["Selected"]then a6=a6+1;if a8["standby"]==1 then a7=a7+1 end end end;local a9=string.format("共|cffFFFFFF%d|r人,选中|cff0089BC%d|r人,其中含替补:|cff00FE00%d|r人",numEntries,a6,a7)_G["WebDKP_Frame".."SelectStatus".."Label"]:SetText(a9)end;function WebDKP_SelectLogToggle(self)local c=self;if WebDKP_Log~=nil then if _G["AwardedReason"]~=nil and _G["AwardedDate"]~=nil then local v=_G["AwardedReason".." ".."AwardedDate"]if v~=nil then WebDKP_Log[v]["selected"]=false end end;if _G["LineLocation"]~=""then _G["LineLocation"]:SetVertexColor(0,0,0,0)end;local a1=_G[c:GetName().."Date"]:GetText()local a2=_G[c:GetName().."Reason"]:GetText()local _,a3,a4=WebDKP_GetItemInfo(a2)a2=a3;local a5=a2 .." "..a1;if WebDKP_Log[a5]~=nil then if WebDKP_Log[a5]["selected"]then WebDKP_Log[a5]["selected"]=false;_G[c:GetName().."Background"]:SetVertexColor(0.2,0.2,0.7,0.5)else WebDKP_Log[a5]["selected"]=true;_G[c:GetName().."Background"]:SetVertexColor(0.1,0.1,0.9,0.8)end end;_G["AwardedReason"]=a2;_G["AwardedDate"]=a1;_G["LineLocation"]=_G[c:GetName().."Background"]WebDKP_UpdateAwardedTable(a2,a1)end end;function WebDKP_Tables_DropDown_OnLoad()UIDropDownMenu_Initialize(WebDKP_Tables_DropDown,WebDKP_Tables_DropDown_Init)end;function WebDKP_Tables_DropDown_Init()if WebDKP_Frame.selectedTableid==nil then WebDKP_Frame.selectedTableid=1 end;local aa;local ab=""local ac={}for y,w in pairs(WebDKP_Tables)do local ad=w;ad["name"]=y;tinsert(ac,w)end;table.sort(ac,function(ae,af)return ae["id"]<af["id"]end)if ac~=nil and table.getn(ac)~=0 then for _,w in pairs(ac)do if type(w)=="table"then aa={}aa.text=w["name"]aa.value=w["id"]aa.func=WebDKP_Tables_DropDown_OnClick;if w["id"]==WebDKP_Frame.selectedTableid then aa.checked=w["id"]==WebDKP_Frame.selectedTableid;ab=aa.text end;UIDropDownMenu_AddButton(aa)end end end;UIDropDownMenu_SetSelectedName(WebDKP_Tables_DropDown,ab)UIDropDownMenu_SetWidth(WebDKP_Tables_DropDown,200,10)end;function WebDKP_Tables_DropDown_OnClick(self)local c=self;WebDKP_Frame.selectedTableid=c.value;WebDKP_Options["SelectedTableId"]=c.value;WebDKP_Tables_DropDown_Init()WebDKP_UpdateTableToShow()WebDKP_UpdateTable()end;function WebDKP_MinimapButton_MouseDown(self)local c=self;local ag,ah=GetCursorPosition()ag=ag/c:GetEffectiveScale()ah=ah/c:GetEffectiveScale()WebDKP_MinimapButton.CursorStartX=ag;WebDKP_MinimapButton.CursorStartY=ah;local vCenterX,vCenterY=WebDKP_MinimapButton:GetCenter()local ai,aj=Minimap:GetCenter()WebDKP_MinimapButton.CenterStartX=vCenterX-ai;WebDKP_MinimapButton.CenterStartY=vCenterY-aj end;function WebDKP_MinimapButton_MouseUp(self,ak)PlaySound(856)if ak=="RightButton"then ToggleDropDownMenu(1,nil,self,"WebDKP_MinimapButton",0,0)else WebDKP_WinTab_ToggleGUI()end end;function WebDKP_MinimapButton_DragStart(self)WebDKP_MinimapButton.IsDragging=true;WebDKP_UpdateFrame:Show()end;function WebDKP_MinimapButton_DragEnd(self)WebDKP_MinimapButton.IsDragging=false;WebDKP_UpdateFrame:Hide()end;function WebDKP_MinimapButton_UpdateDragPosition(self)local c=self;local ag,ah=GetCursorPosition()ag=ag/c:GetEffectiveScale()ah=ah/c:GetEffectiveScale()local al=ag-WebDKP_MinimapButton.CursorStartX;local am=ah-WebDKP_MinimapButton.CursorStartY;local vCenterX=WebDKP_MinimapButton.CenterStartX+al;local vCenterY=WebDKP_MinimapButton.CenterStartY+am;local an=math.atan2(vCenterX,vCenterY)WebDKP_MinimapButton_SetPositionAngle(an)end;function WebDKP_RestrictAngle(ao,ap,aq)if ao==nil then return ap end;if ap==nil or ap==nil then return ao end;if ao<=ap or ao>=aq then return ao end;local ar=(ao-ap)/(aq-ap)if ar>0.5 then return aq else return ap end end;function WebDKP_MinimapButton_SetPositionAngle(ao)local an=ao;local as=nil;local at=nil;if GameTimeFrame:IsVisible()then if MinimapZoomIn:IsVisible()or MinimapZoomOut:IsVisible()then an=WebDKP_RestrictAngle(an,0.4302272732931596,2.930420793963121)else an=WebDKP_RestrictAngle(an,0.4302272732931596,1.720531504573905)end elseif MinimapZoomIn:IsVisible()or MinimapZoomOut:IsVisible()then an=WebDKP_RestrictAngle(an,1.720531504573905,2.930420793963121)end;an=WebDKP_RestrictAngle(an,-1.290357134304173,-0.4918423429923585)local au=80;vCenterX=math.sin(an)*au;vCenterY=math.cos(an)*au;WebDKP_MinimapButton:SetPoint("CENTER","Minimap","CENTER",vCenterX-1,vCenterY-1)WebDKP_Options["MiniMapButtonAngle"]=an end;function WebDKP_OnUpdate(self,av)if WebDKP_MinimapButton.IsDragging then WebDKP_MinimapButton_UpdateDragPosition(self)end end;function WebDKP_MinimapDropDown_OnLoad(self)local c=self;UIDropDownMenu_Initialize(c,WebDKP_MinimapDropDown_Initialize)end;function WebDKP_MinimapDropDown_Initialize()WebDKP_Add_MinimapDropDownItem(self,WebDKP.translations.WEBDKP_MINIMAPDROPDOWN_OPTIONS,WebDKP_Options_ToggleUI)WebDKP_Add_MinimapDropDownItem(self,WebDKP.translations.WEBDKP_MINIMAPDROPDOWN_HELP,WebDKP_Help_ToggleGUI)end;function WebDKP_Log_ToggleUI()if WebDKP_LogFrame:IsShown()then WebDKP_LogFrame:Hide()else WebDKP_LogFrame:Show()end end;function WebDKP_Add_MinimapDropDownItem(self,text,aw)local c=self;local aa={}aa.text=text;aa.value=text;aa.owner=c;aa.func=aw;UIDropDownMenu_AddButton(aa)end;function WebDKP_ItemChatClick(ax,text,ak)local ay=strfind(text,"player")if ay==nil then WebDKP_Bid_ItemChatClick(ax,text,ak)if IsShiftKeyDown()or IsControlKeyDown()then local _,a3,a4=WebDKP_GetItemInfo(ax)WebDKP_AwardItem_FrameItemName:SetText(a4)end;if IsAltKeyDown()and WebDKP_Options["AltClick"]==1 then local _,a3,a4=WebDKP_GetItemInfo(ax)WebDKP_BidFrameItem:SetText(a4)if WebDKP_BidFrame:IsShown()==FALSE then WebDKP_Bid_ToggleUI()end end end end;function WebDKP_HandleModifiedItemClick(az)if az==nil then return end;WebDKP_Bid_ItemChatClick(az,nil,nil)if IsShiftKeyDown()or IsControlKeyDown()then local aA,a3,a4=WebDKP_GetItemInfo(az)WebDKP_Bid_ItemChatClick(a4,a4,nil)WebDKP_AwardItem_FrameItemName:SetText(az)end;if IsAltKeyDown()and WebDKP_Options["AltClick"]==1 then local _,a3,a4=WebDKP_GetItemInfo(az)WebDKP_BidFrameItem:SetText(a4)if WebDKP_BidFrame:IsShown()==FALSE then WebDKP_Bid_ToggleUI()end end end;function WebDKP_ItemChatShiftClick(_,ax,text,ak)local ay=strfind(text,"player")if ay==nil then WebDKP_Bid_ItemChatClick(ax,text,ak)if IsShiftKeyDown()or IsControlKeyDown()then local _,a3,a4=WebDKP_GetItemInfo(ax)WebDKP_AwardItem_FrameItemName:SetText(a4)end;if IsAltKeyDown()then local _,a3,a4=WebDKP_GetItemInfo(ax)WebDKP_BidFrameItem:SetText(a4)if WebDKP_BidFrame:IsShown()==FALSE then WebDKP_Bid_ToggleUI()end end end end;function Webdkp_Sys_Msg_Received(e)local A=e;local aB=""local aC=WebDKP.translations.FORMAT_MSG_ROLLING_PATTERN;local a8,aD,aE,aF,aG,aH,aI;if string.find(A,aC)then _,_,a8,aD,aE,aF=string.find(A,aC)WebDKP_ProcessRoll(a8,aD,aE,aF)end end;function WebDKP_Start_Synch()local aJ=WebDKP_Options["SynchFrom"]local aK=WebDKP_Options["SynchPassword"]if aJ~=nil and aJ~=""then SendChatMessage("!Synch "..aK,"WHISPER",nil,aJ)else SendChatMessage("WebDKP: Invalid user to Synchronize from","WHISPER",nil,UnitName("player"))end end;function WebDKP_Start_SynchAll()local aJ=WebDKP_Options["SynchFrom"]local aK=WebDKP_Options["SynchPassword"]SendChatMessage("!WDKP_Synch_All "..aK,"WHISPER",nil,aJ)end;function WebDKP_UpdateLogTable()if WebDKP_Log~=nil then local aL={}local aM={}local aN=0;local aO=""for y,z in pairs(WebDKP_Log)do aO=""aN=0;if type(z)=="table"then if z["date"]~=nil and z["points"]~=nil and z["awarded"]~=nil and z["reason"]~=nil and z["foritem"]~=nil then aM=z["awarded"]local aP=true;if WebDKP_FilterName then aP=false;for y,z in pairs(aM)do if type(z)=="table"then if z["name"]==WebDKP_FilterName then aP=true;break end end end end;if aP then for y,z in pairs(aM)do if type(z)=="table"then if z["name"]~=nil then aO=z["name"]aN=aN+1 end end end;if aN==1 then if z["foritem"]=="false"then reasonText=z["reason"]else reasonText=z["itemlink"]end;tinsert(aL,{z["date"],z["points"],reasonText,aO,z["foritem"]})end;if aN>1 then if z["foritem"]=="false"then reasonText=z["reason"]else reasonText=z["itemlink"]end;tinsert(aL,{z["date"],z["points"],reasonText,WebDKP.translations.Multipleplayers,z["foritem"]})end end end end end;table.sort(aL,function(aQ,aR)if aQ and aR then if aQ==nil then return 1>0 elseif aR==nil then return 1<0 end;if WebDKP_LogSort["way2"]==1 then if aQ[WebDKP_LogSort["curr2"]]==aR[WebDKP_LogSort["curr2"]]then return aQ[1]>aR[1]else return aQ[WebDKP_LogSort["curr2"]]>aR[WebDKP_LogSort["curr2"]]end else if aQ[WebDKP_LogSort["curr2"]]==aR[WebDKP_LogSort["curr2"]]then return aQ[1]<aR[1]else return aQ[WebDKP_LogSort["curr2"]]<aR[WebDKP_LogSort["curr2"]]end end end end)local numEntries=getn(aL)local aS=FauxScrollFrame_GetOffset(WebDKP_LogFrameScrollLogFrame)FauxScrollFrame_Update(WebDKP_LogFrameScrollLogFrame,numEntries,23,20)for t=1,23,1 do local G=getglobal("WebDKP_LogFrameLine"..t)awardedText=getglobal("WebDKP_LogFrameLine"..t.."Awarded")local aT=getglobal("WebDKP_LogFrameLine"..t.."Amount")local reasonText=getglobal("WebDKP_LogFrameLine"..t.."Reason")local aU=getglobal("WebDKP_LogFrameLine"..t.."Date")local aV=t+FauxScrollFrame_GetOffset(WebDKP_LogFrameScrollLogFrame)if aV<=numEntries then G:Show()local charname=aL[aV][4]awardedText:SetText(charname)if WebDKP_DkpTable[charname]~=nil and WebDKP_DkpTable[charname]["class"]~=nil then local aW=WebDKP_DkpTable[charname]["class"]aW=string.upper(aW)aW=string.gsub(aW," ","")local aX=WebDKP.translations.CLASS_LOCALIZED_TO_ENG_MAP[aW]if aX~=nil then local aY,aZ,a_,b0=GetClassColor(string.upper(aX))awardedText:SetTextColor(aY,aZ,a_)end end;aT:SetText(aL[aV][2])reasonText:SetText(aL[aV][3])aU:SetText(aL[aV][1])else G:Hide()end end end end;function WebDKP_UpdateAwardedTable(b1,b2)local aM={}nameentries={}if b1~=nil and b2~=nil then aM=WebDKP_Log[b1 .." "..b2]["awarded"]for y,z in pairs(aM)do if type(z)=="table"then if z["name"]~=nil then tinsert(nameentries,{z["name"]})end end end end;table.sort(nameentries,function(aQ,aR)if aQ and aR then if aQ==nil then return 1>0 elseif aR==nil then return 1<0 end;if WebDKP_LogSort["way3"]==1 then if aQ[WebDKP_LogSort["curr3"]]==aR[WebDKP_LogSort["curr3"]]then return aQ[1]>aR[1]else return aQ[WebDKP_LogSort["curr3"]]>aR[WebDKP_LogSort["curr3"]]end else if aQ[WebDKP_LogSort["curr3"]]==aR[WebDKP_LogSort["curr3"]]then return aQ[1]<aR[1]else return aQ[WebDKP_LogSort["curr3"]]<aR[WebDKP_LogSort["curr3"]]end end end end)local numEntries=getn(nameentries)local aS=FauxScrollFrame_GetOffset(WebDKP_LogFrameScrollAwardedFrame)FauxScrollFrame_Update(WebDKP_LogFrameScrollAwardedFrame,numEntries,23,20)for t=1,23,1 do local G=getglobal("WebDKP_LogFrameLines"..t)awardedText=getglobal("WebDKP_LogFrameLines"..t.."Awarded")local aV=t+FauxScrollFrame_GetOffset(WebDKP_LogFrameScrollAwardedFrame)if aV<=numEntries then G:Show()local charname=nameentries[aV][1]awardedText:SetText(charname)if WebDKP_DkpTable[charname]~=nil and WebDKP_DkpTable[charname]["class"]~=nil then local aW=WebDKP_DkpTable[charname]["class"]aW=string.upper(aW)aW=string.gsub(aW," ","")local aX=WebDKP.translations.CLASS_LOCALIZED_TO_ENG_MAP[aW]if aX~=nil then local aY,aZ,a_,b0=GetClassColor(string.upper(aX))awardedText:SetTextColor(aY,aZ,a_)end end else G:Hide()end end end;function WebDKP_ScrollLogAwardedToggle()WebDKP_UpdateAwardedTable(_G["AwardedReason"],_G["AwardedDate"])end;function WebDKP_LogUndo()if _G["AwardedReason"]~=""and _G["AwardedDate"]~=""then if WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["awarded"]~=nil then if WebDKP_Options["EnableSynch"]==1 then WebDKP_Synch_Auto(points,"UNDO","",_G["AwardedReason"],_G["AwardedDate"])end;awardedtoremove=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["awarded"]tableidfrom=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["tableid"]local points=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["points"]local b1=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["reason"]local b3=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["foritem"]points=tonumber(points)*-1;for y,z in pairs(awardedtoremove)do if type(z)=="table"then name=z["name"]WebDKP_AddDKPToTable(name,_,points,tableidfrom)WebDKP_UpdateTableToShow()WebDKP_UpdateTable()end end;WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]=nil;_G["LineLocation"]:SetVertexColor(0,0,0,0)_G["LineLocation"]=""_G["AwardedReason"]=""_G["AwardedDate"]=""WebDKP_UpdateLogTable()end;for t=1,23,1 do local G=getglobal("WebDKP_LogFrameLines"..t)G:Hide()end;local numEntries=0;FauxScrollFrame_Update(WebDKP_LogFrameScrollAwardedFrame,numEntries,23,20)end end;function WebDKP_ScrollLogListToggle()WebDKP_UpdateLogTable()if WebDKP_Log~=nil then if _G["AwardedReason"]~=""and _G["AwardedDate"]~=""then WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["selected"]=false end;if _G["LineLocation"]~=""then _G["LineLocation"]:SetVertexColor(0,0,0,0)end end end;function WebDKPLog_SortBy(b4)if WebDKP_LogSort["curr2"]==b4 then WebDKP_LogSort["way2"]=abs(WebDKP_LogSort["way2"]-1)else WebDKP_LogSort["curr2"]=b4;if b4==1 then WebDKP_LogSort["way2"]=0 elseif b4==2 then WebDKP_LogSort["way2"]=1 elseif b4==3 then WebDKP_LogSort["way2"]=0 else WebDKP_LogSort["way2"]=1 end end;WebDKP_UpdateLogTable()end;function WebDKPCharLog_SortBy(b4)if WebDKP_LogSort["curr4"]==b4 then WebDKP_LogSort["way4"]=abs(WebDKP_LogSort["way4"]-1)else WebDKP_LogSort["curr4"]=b4;if b4==1 then WebDKP_LogSort["way4"]=0 elseif b4==2 then WebDKP_LogSort["way4"]=1 elseif b4==3 then WebDKP_LogSort["way4"]=1 else WebDKP_LogSort["way4"]=1 end end end;function WebDKP_SelectAwardeeLogToggle(self)local c=self;if WebDKP_Log~=nil then if _G["LineLocation"]~=""then _G["LineLocation"]:SetVertexColor(0,0,0,0)end;local b5=_G[c:GetName().."Awarded"]:GetText()if b5~=nil then WebDKP_LogFrameCharChange:SetText(b5)end end end;function WebDKP_DeleteLogChar()local b6=WebDKP_LogFrameCharChange:GetText()local b7=0;if _G["AwardedReason"]~=""and _G["AwardedDate"]~=""then if WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["awarded"]~=nil and b6~=""and b6~=nil then tableidfrom=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["tableid"]local points=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["points"]local b1=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["reason"]local b3=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["foritem"]points=tonumber(points)*-1;local b8=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["awarded"]local numEntries=getn(b8)for y,z in pairs(b8)do if type(z)=="table"then if z["name"]~=nil then charname=z["name"]if charname==b6 then b7=1 end end end end;if b7==1 then WebDKP_AddDKPToTable(b6,_,points,tableidfrom)WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["awarded"][b6]=nil;WebDKP_UpdateLogTable()numEntries=getn(b8)if numEntries==nil then WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]=nil;local G=getglobal("WebDKP_LogFrameLines"..1)G:Hide()else WebDKP_UpdateAwardedTable(_G["AwardedReason"],_G["AwardedDate"])end end;if WebDKP_Options["EnableSynch"]==1 then WebDKP_Synch_Auto(points,"LOGDEL",b6,_G["AwardedReason"],_G["AwardedDate"])end end end;WebDKP_UpdateTableToShow()WebDKP_UpdateTable()end;function WebDKP_AddLogChar()local b9=WebDKP_LogFrameCharChange:GetText()local K=WebDKP_GetTableid()if _G["AwardedReason"]~=""and _G["AwardedDate"]~=""then if WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["awarded"]~=nil and b9~=""and b9~=nil then tableidfrom=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["tableid"]local points=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["points"]local b1=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["reason"]local b3=WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["foritem"]points=tonumber(points)WebDKP_MakeSureInTable(b9,K,nil,nil)local ba=tonumber(WebDKP_Options["dkpCapLimit"])if WebDKP_DkpTable[b9]["dkp_"..K]+points>ba then WebDKP_Print("Sorry but this player cannot be added to this specific award because it will place them over the DKP CAP.")PlaySound(847)else WebDKP_AddDKPToTable(b9,_,points,tableidfrom)WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["awarded"][b9]={}WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["awarded"][b9]["name"]=b9;WebDKP_Log[_G["AwardedReason"].." ".._G["AwardedDate"]]["awarded"][b9]["class"]=class;WebDKP_UpdateLogTable()if WebDKP_Options["EnableSynch"]==1 then WebDKP_Synch_Auto(points,"LOGADD",b9,_G["AwardedReason"],_G["AwardedDate"])end end end;WebDKP_UpdateAwardedTable(_G["AwardedReason"],_G["AwardedDate"])end;WebDKP_UpdateTableToShow()WebDKP_UpdateTable()end;function WebDKP_AnnounceDKPByClass(class,bb)nameEn=WebDKP.translations.CLASS_LOCALIZED_TO_ENG_MAP[class]if nameEn==nil then return end;WebDKP_AnnounceDKPSortedList({[string.lower(nameEn)]=class},bb)end;function WebDKP_AnnounceDKPSortedList(bc,bb)local K=WebDKP_GetTableid()if bc==nil then bc={}end;local bd={}for y,z in pairs(WebDKP_DkpTable)do if type(z)=="table"then local L=y;local M=z["class"]local N=WebDKP_GetDKP(L,K)if N~=nil then local O=floor((N-1)/WebDKP_TierInterval)if N==0 then O=0 end;if WebDKP_PassesWhisperFilter(L,M,N,O,bb,bc)then tinsert(bd,{L,M,N,O})end end end end;table.sort(bd,function(aQ,aR)if aQ and aR then if aQ[3]==aR[3]then return aQ[1]>=aR[1]else return aQ[3]<=aR[3]end end end)local be=WebDKP_GetTellLocation()for y,z in pairs(bc)do WebDKP_SendAnnouncement("公布职业: "..z.." 的当前DKP",be)end;WebDKP_SendAnnouncement("==============================",be)for y,z in pairs(bd)do if type(z)=="table"then if z[1]~=nil and z[2]~=nil and z[3]~=nil then local bf=z[3]..": "..z[1].." ( "..z[2].." ) "WebDKP_SendAnnouncement(bf,be)end end end;if table.getn(bd)==0 then WebDKP_SendAnnouncement("未能查到相关职业记录",be)else WebDKP_SendAnnouncement("更多明细请微信搜索小程序'webdkp'查看哦!",be)end end;do local bg,bh,bi,bj,bk;local function bl()bg=CreateFrame("Frame","DBMUpdateReminder",UIParent)bg:SetFrameStrata("FULLSCREEN_DIALOG")bg:SetWidth(430)bg:SetHeight(140)bg:SetPoint("TOP",0,-230)bg:SetBackdrop({bgFile="Interface\\DialogFrame\\UI-DialogBox-Background",edgeFile="Interface\\DialogFrame\\UI-DialogBox-Border",tile=true,tileSize=32,edgeSize=32,insets={left=11,right=12,top=12,bottom=11}})bh=bg:CreateFontString(nil,"ARTWORK","GameFontNormal")bh:SetWidth(410)bh:SetHeight(0)bh:SetPoint("TOP",0,-16)bj=CreateFrame("EditBox",nil,bg)do local bm=bj:CreateTexture(nil,"BACKGROUND")local bn=bj:CreateTexture(nil,"BACKGROUND")local bo=bj:CreateTexture(nil,"BACKGROUND")bm:SetTexture(130959)bm:SetHeight(32)bm:SetWidth(32)bm:SetPoint("LEFT",-14,0)bm:SetTexCoord(0,0.125,0,1)bn:SetTexture(130960)bn:SetHeight(32)bn:SetWidth(32)bn:SetPoint("RIGHT",6,0)bn:SetTexCoord(0.875,1,0,1)bo:SetTexture(130960)bo:SetHeight(32)bo:SetWidth(1)bo:SetPoint("LEFT",bm,"RIGHT")bo:SetPoint("RIGHT",bn,"LEFT")bo:SetTexCoord(0,0.9375,0,1)end;bj:SetHeight(32)bj:SetWidth(250)bj:SetPoint("TOP",bh,"BOTTOM",0,-4)bj:SetFontObject("GameFontHighlight")bj:SetTextInsets(0,0,0,1)bj:SetFocus()bj:SetText(bk)bj:HighlightText()bj:SetScript("OnTextChanged",function(self)bj:SetText(bk)bj:HighlightText()end)bi=bg:CreateFontString(nil,"ARTWORK","GameFontNormal")bi:SetWidth(410)bi:SetHeight(0)bi:SetPoint("TOP",bj,"BOTTOM",0,0)local ak=CreateFrame("Button",nil,bg)ak:SetHeight(24)ak:SetWidth(75)ak:SetPoint("BOTTOM",0,13)ak:SetNormalFontObject("GameFontNormal")ak:SetHighlightFontObject("GameFontHighlight")ak:SetNormalTexture(ak:CreateTexture(nil,nil,"UIPanelButtonUpTexture"))ak:SetPushedTexture(ak:CreateTexture(nil,nil,"UIPanelButtonDownTexture"))ak:SetHighlightTexture(ak:CreateTexture(nil,nil,"UIPanelButtonHighlightTexture"))ak:SetText(OKAY)ak:SetScript("OnClick",function(self)bg:Hide()end)end;function WebDKP_ShowOpenWebsite(self)bk=_G["WebDKP_Frame".."Website".."Label"]:GetText()if not bg then bl()else bj:SetText(bk)bj:HighlightText()end;bg:Show()bh:SetText(text)bi:SetText("按下 "..(IsMacClient()and"Cmd-C"or"Ctrl-C").."复制链接到剪切板。")end end;do local function bp()end;function WebDKP_WinTab_OnLoad(self)self:RegisterEvent("PLAYER_ENTERING_WORLD")self._curTab=1;self:SetScript("OnEvent",function()self:UnregisterEvent("PLAYER_ENTERING_WORLD")local bq={WebDKP_Frame,WebDKP_BidFrame,WebDKP_TimedAwardFrame,WebDKP_SynchFrame,WebDKP_LogFrame,WebDKP_RaidInfoFrame,WebDKP_CharRaidInfoFrame}local br={WebDKP_Table_GUI,WebDKP_Bid_ToggleUI,WebDKP_TimedAward_ToggleUI,WebDKP_Synch_ToggleUI,WebDKP_Log_ToggleUI,WebDKP_RaidLog_ToggleUI,WebDKP_CharRaidLog_ToggleUI}for aV,bg in pairs(bq)do do bg._ClearAllPoints=bg.ClearAllPoints;bg.ClearAllPoints=bp;bg._SetPoint=bg.SetPoint;bg.SetPoint=bp;bg._SetParent=bg.SetParent;bg.SetParent=bp end;bg:_SetParent(self)bg:_ClearAllPoints()bg:_SetPoint("CENTER",self)local bs=_G["WebDKP_WinTabFrameTab"..aV]bs.handler=br[aV]bs.frame=bg;hooksecurefunc(bg,"Show",function()for t,bt in pairs(bq)do if t~=aV then if bt:IsShown()then br[t]()end;PanelTemplates_DeselectTab(_G["WebDKP_WinTabFrameTab"..t])end end;self._curTab=aV;PanelTemplates_SelectTab(bs)self:Show()WebDKP_WinTabFrameTab1:ClearAllPoints()WebDKP_WinTabFrameTab1:SetPoint("TOPLEFT",bg,"BOTTOMLEFT")end)hooksecurefunc(bg,"Hide",function()for _,bg in pairs(bq)do if bg:IsShown()then break end end;self:Hide()end)bg:SetScript("OnMouseDown",function()self:StartMoving()end)bg:SetScript("OnMouseUp",function()self:StopMovingOrSizing()end)end end)end;function WebDKP_WinTab_OnClick(self)self.handler()end;function WebDKP_WinTab_ToggleGUI()if WebDKP_WinTabFrame:IsShown()then WebDKP_WinTabFrame:Hide()else WebDKP_WinTabFrame:Show()local bq={WebDKP_Frame,WebDKP_BidFrame,WebDKP_TimedAwardFrame,WebDKP_SynchFrame,WebDKP_LogFrame,WebDKP_RaidInfoFrame,WebDKP_CharRaidInfoFrame}local br={WebDKP_Table_GUI,WebDKP_Bid_ToggleUI,WebDKP_TimedAward_ToggleUI,WebDKP_Synch_ToggleUI,WebDKP_Log_ToggleUI,WebDKP_RaidLog_ToggleUI,WebDKP_CharRaidLog_ToggleUI}if not bq[WebDKP_WinTabFrame._curTab]:IsShown()then br[WebDKP_WinTabFrame._curTab]()end end end end;function WebDKP_SelectPlayerFilter_GetLog(L,bu)WebDKP_LogFramePlayerFilter:SetText(L)if not bu then WebDKP_FilterName=L;if not WebDKP_LogFrame:IsShown()then WebDKP_Log_ToggleUI()end;WebDKP_UpdateLogTable()end end;function WebDKP_ClearPlayer_Filter()WebDKP_LogFramePlayerFilter:SetText("")WebDKP_FilterName=nil;WebDKP_UpdateLogTable()end;WebDKP_LogLineDel_LogNode=nil;StaticPopupDialogs["WebDKP_DelLog"]={text="删除此记录？",button1="是",button2="否",OnShow=function(self)end,OnAccept=function(self)if WebDKP_LogLineDel_LogNode then WebDKP_SelectLogToggle(WebDKP_LogLineDel_LogNode)WebDKP_LogUndo()WebDKP_LogLineDel_LogNode=nil end end,timeout=0,whileDead=true,hideOnEscape=true,preferredIndex=1}function WebDKP_LogLineDel_OnClick(self)WebDKP_LogLineDel_LogNode=self:GetParent()StaticPopup_Show("WebDKP_DelLog")end;function WebDKP_LineFilter_OnClick(self)local L=_G[self:GetParent():GetName().."Name"]:GetText()if not WebDKP_DkpTable[L]["Selected"]then WebDKP_DkpTable[L]["Selected"]=true;WebDKP_UpdateSelectPlayerCount()end;WebDKP_SelectPlayerFilter_GetLog(L)end;function WebDKP_Text()WebDKP_BidFrameTitle:SetText(WebDKP.translations.BID_TITLE)WebDKP_BidFrameItemLabel:SetText(WebDKP.translations.BID_ITEM_LABEL)WebDKP_BidFrameStartingBidLabel:SetText(WebDKP.translations.BID_STARTING_BID_LABEL)WebDKP_BidFrameTimeLabel:SetText(WebDKP.translations.BID_TIME_LABEL)WebDKP_BidFrameTimeHint:SetText(WebDKP.translations.BID_TIME_HINT)WebDKP_BidFrameBidButton:SetText(WebDKP.translations.BID_BID_BUTTON)WebDKP_BidFrameRollButton:SetText(WebDKP.translations.BID_ROLL_BUTTON)WebDKP_BidFrameTop3Button:SetText(WebDKP.translations.BID_TOP3_BUTTON)WebDKP_BidFrameCountDown5Button:SetText(WebDKP.translations.Fiveseconds)WebDKP_BidFrameNameTableHeader:SetText(WebDKP.translations.BID_TABLE_HEADER)WebDKP_BidFrameNameLabel:SetText(WebDKP.translations.BID_TABLE_COLUMN_NAME_LABEL)WebDKP_BidFrameBidLabel:SetText(WebDKP.translations.BID_TABLE_COLUMN_BID_LABEL)WebDKP_BidFrameDKPLabel:SetText(WebDKP.translations.BID_TABLE_COLUMN_DKP_LABEL)WebDKP_BidFramePostLabel:SetText(WebDKP.translations.BID_TABLE_COLUMN_POST_LABEL)WebDKP_BidFrameRollLabel:SetText(WebDKP.translations.BID_TABLE_COLUMN_ROLL_LABEL)WebDKP_BidFrameSpecLabel:SetText(WebDKP.translations.BID_TABLE_COLUMN_SPEC_LABEL)WebDKP_BidFrameGuildRankLabel:SetText(WebDKP.translations.BID_TABLE_COLUMN_GUILD_RANK_LABEL)WebDKP_BidFrameAward:SetText(WebDKP.translations.BID_AWARD)WebDKP_BidConfirmFrameCost:SetText(WebDKP.translations.BidConfirmFrameCost)WebDKP_BidConfirmFrameYes:SetText(WebDKP.translations.BidConfirmFrameYes)WebDKP_BidConfirmFrameNo:SetText(WebDKP.translations.BidConfirmFrameNo)WebDKP_CharRaidInfoFrameTitle:SetText(WebDKP.translations.CharRaidInfoFrameTitle)WebDKP_CharRaidInfoFrameHeaderLogTable:SetText(WebDKP.translations.CharRaidInfoFrameHeaderLogTable)WebDKP_CharRaidInfoFrameHeaderAttended:SetText(WebDKP.translations.CharRaidInfoFrameHeaderAttended)WebDKP_CharRaidInfoFrameFilterDaysLabel:SetText(WebDKP.translations.CharRaidInfoFrameFilterDaysLabel)WebDKP_CharRaidInfoFrameCharRaidNameLabel:SetText(WebDKP.translations.CharRaidInfoFrameCharRaidNameLabel)WebDKP_CharRaidInfoFrameCharRaidAttendedLabel:SetText(WebDKP.translations.CharRaidInfoFrameCharRaidAttendedLabel)WebDKP_CharRaidInfoFrameCharRaidPercentLabel:SetText(WebDKP.translations.CharRaidInfoFrameCharRaidPercentLabel)WebDKP_CharRaidInfoFrameCharRaidTotRaidsLabel:SetText(WebDKP.translations.CharRaidInfoFrameCharRaidTotRaidsLabel)WebDKP_CharRaidInfoFrameCharRaidLocationLabel:SetText(WebDKP.translations.CharRaidInfoFrameCharRaidLocationLabel)WebDKP_CharRaidInfoFrameCharRaidDateLabel:SetText(WebDKP.translations.CharRaidInfoFrameCharRaidDateLabel)WebDKP_CharRaidInfoFrameRemChar:SetText(WebDKP.translations.CharRaidInfoFrameRemChar)WebDKP_CharRaidInfoFrameInGroupLabel:SetText(WebDKP.translations.CharRaidInfoFrameInGroupLabel)WebDKP_CharRaidInfoFrameFilterDateLabel:SetText(WebDKP.translations.CharRaidInfoFrameFilterDateLabel)WebDKP_CharRaidInfoFrameApplyFilterDateLabel:SetText(WebDKP.translations.CharRaidInfoFrameApplyFilterDateLabel)WebDKP_FrameTitle:SetText(WebDKP.translations.FrameTitle)WebDKP_FrameHeaderDKPTable:SetText(WebDKP.translations.WEBDKP_HEADER)WebDKP_FrameNameColumn:SetText(WebDKP.translations.WEBDKP_FRAME_NAME_COLUMN)WebDKP_FrameClassColumn:SetText(WebDKP.translations.WEBDKP_FRAME_CLASS_COLUMN)WebDKP_FrameDKPColumn:SetText(WebDKP.translations.WEBDKP_FRAME_DKP_COLUMN)WebDKP_FrameZoneColumn:SetText(WebDKP.translations.FrameZoneColumn)WebDKP_FrameGuildRankColumn:SetText(WebDKP.translations.WEBDKP_FRAME_GUILDRANK_COLUMN)WebDKP_FrameWebsiteLabel:SetText(WebDKP.translations.FrameWebsiteLabel)WebDKP_FrameAnnounceDKPLimitToGroupText:SetText(WebDKP.translations.FrameAnnounceDKPLimitToGroupText)WebDKP_FrameAnnounceDKP:SetText(WebDKP.translations.FrameAnnounceDKP)WebDKP_FrameSaveLog:SetText(WebDKP.translations.DKP_TABLE_SAVE_LOG)WebDKP_FrameRefresh:SetText(WebDKP.translations.DKP_TABLE_Refresh)WebDKP_FiltersFrameHeader:SetText(WebDKP.translations.FILTER_HEADER)WebDKP_FiltersFrameClassDruidText:SetText(WebDKP.translations.FILTER_CLASS_DRUID)WebDKP_FiltersFrameClassHunterText:SetText(WebDKP.translations.FILTER_CLASS_HUNTER)WebDKP_FiltersFrameClassMageText:SetText(WebDKP.translations.FILTER_CLASS_MAGE)WebDKP_FiltersFrameClassRogueText:SetText(WebDKP.translations.FILTER_CLASS_ROGUE)WebDKP_FiltersFrameClassShamanText:SetText(WebDKP.translations.FILTER_CLASS_SHAMAN)WebDKP_FiltersFrameClassPaladinText:SetText(WebDKP.translations.FILTER_CLASS_PALADIN)WebDKP_FiltersFrameClassPriestText:SetText(WebDKP.translations.FILTER_CLASS_PRIEST)WebDKP_FiltersFrameClassWarriorText:SetText(WebDKP.translations.FILTER_CLASS_WARRIOR)WebDKP_FiltersFrameClassWarlockText:SetText(WebDKP.translations.FILTER_CLASS_WARLOCK)WebDKP_FiltersFrameClassCastersText:SetText(WebDKP.translations.FILTER_CLASS_CASTERS)WebDKP_FiltersFrameClassMeleeText:SetText(WebDKP.translations.FILTER_CLASS_MELEE)WebDKP_FiltersFrameClassHealerText:SetText(WebDKP.translations.FILTER_CLASS_HEALER)WebDKP_FiltersFrameClassChainText:SetText(WebDKP.translations.FILTER_CLASS_CHAIN)WebDKP_FiltersFrameClassClothText:SetText(WebDKP.translations.FILTER_CLASS_CLOTH)WebDKP_FiltersFrameClassLeatherText:SetText(WebDKP.translations.FILTER_CLASS_LEATHER)WebDKP_FiltersFrameClassPlateText:SetText(WebDKP.translations.FILTER_CLASS_PLATE)WebDKP_FiltersFrameCheckAllText:SetText(WebDKP.translations.FILTER_CHECK_ALL)WebDKP_FiltersFrameUncheckAllText:SetText(WebDKP.translations.FILTER_UNCHECK_ALL)WebDKP_FiltersFrameLimitRaidText:SetText(WebDKP.translations.FILTER_PLAYERS_IN_GROUP)WebDKP_FiltersFrameStandby1Text:SetText(WebDKP.translations.FILTER_STANDBY_PLAYERS)WebDKP_FiltersFrameOthersText:SetText(WebDKP.translations.FILTER_OTHERS_PLAYERS)WebDKP_AwardDKP_FrameHeader:SetText(WebDKP.translations.AWARD_DKP_HEADER)WebDKP_AwardDKP_FrameInfo1:SetText(WebDKP.translations.AWARD_DKP_INFO1)WebDKP_AwardDKP_FrameDecayHeader:SetText(WebDKP.translations.AWARD_DKP_DECAY_HEADER)WebDKP_AwardDKP_FrameInfo3:SetText(WebDKP.translations.AWARD_DKP_INFO3)WebDKP_AwardDKP_FrameReasonLabel:SetText(WebDKP.translations.AWARD_DKP_REASON_LABEL)WebDKP_AwardDKP_FramePointsLabel:SetText(WebDKP.translations.AWARD_DKP_POINTS_LABEL)WebDKP_AwardDKP_FrameAwardPoints:SetText(WebDKP.translations.AWARD_DKP_AWARD_POINTS)WebDKP_AwardDKP_FrameDecayLabel:SetText(WebDKP.translations.AWARD_DKP_DECAY_LABEL)WebDKP_AwardDKP_FrameDecayButton:SetText(WebDKP.translations.AWARD_DKP_DECAY_BUTTON)WebDKP_FrameSelectAllText:SetText(WebDKP.translations.FrameSelectAllText)WebDKP_FrameDeselectAllText:SetText(WebDKP.translations.FrameDeselectAllText)WebDKP_AwardItem_FrameHeader:SetText(WebDKP.translations.AWARD_ITEM_HEADER)WebDKP_AwardItem_FrameInfo1:SetText(WebDKP.translations.AWARD_ITEM_INFO1)WebDKP_AwardItem_FrameItemNameLabel:SetText(WebDKP.translations.AWARD_ITEM_ITEM_NAME_LABEL)WebDKP_AwardItem_FrameItemCostLabel:SetText(WebDKP.translations.AWARD_ITEM_ITEM_COST_LABEL)WebDKP_AwardItem_FrameItemCostLabel2:SetText(WebDKP.translations.AWARD_ITEM_ITEM_COST_LABEL2)WebDKP_AwardItem_FrameAwardItem:SetText(WebDKP.translations.AWARD_ITEM_AWARD_ITEM)WebDKP_Standby_FrameHeader:SetText(WebDKP.translations.STANDBY_HEADER)WebDKP_Standby_FrameInfo1:SetText(WebDKP.translations.STANDBY_INFO1)WebDKP_Standby_FrameAddStandbyLabel:SetText(WebDKP.translations.STANDBY_ADD_STANDBY_LABEL)WebDKP_Standby_FrameAddToStandby:SetText(WebDKP.translations.STANDBY_ADD_TO_STANDBY)WebDKP_Standby_FrameDelStandby:SetText(WebDKP.translations.STANDBY_DEL_STANDBY)WebDKP_Standby_FrameResetStandby:SetText(WebDKP.translations.STANDBY_RESET_STANDBY)WebDKP_Standby_FrameResetStandbyLabel:SetText(WebDKP.translations.STANDBY_RESET_STANDBY_LABEL)WebDKP_Standby_FrameEnableStandbyZeroSumText:SetText(WebDKP.translations.STANDBY_ENABLE_STANDBY_ZEROSUM)WebDKP_Standby_FrameEnableStandbyTimedText:SetText(WebDKP.translations.STANDBY_ENABLE_STANDBY_TIMED)WebDKP_FrameTab1:SetText(WebDKP.translations.TAB_FILTER)WebDKP_FrameTab2:SetText(WebDKP.translations.TAB_AWARD_DKP)WebDKP_FrameTab3:SetText(WebDKP.translations.TAB_AWARD_ITEM)WebDKP_FrameTab4:SetText(WebDKP.translations.TAB_STANDBY)WebDKP_HelpFrameTitle:SetText(WebDKP.translations.HelpFrameTitle)WebDKP_Help_DropDownLabel:SetText(WebDKP.translations.Help_DropDownLabel)WebDKP_LogFrameTitle:SetText(WebDKP.translations.LogFrameTitle)WebDKP_LogFrameHeaderLogTable:SetText(WebDKP.translations.LogFrameHeaderLogTable)WebDKP_LogFrameHeaderAwardedTo:SetText(WebDKP.translations.LogFrameHeaderAwardedTo)WebDKP_LogFrameDirChar:SetText(WebDKP.translations.LogFrameDirChar)WebDKP_LogFrameDirFilter:SetText(WebDKP.translations.LogFrameDirFilter)WebDKP_LogFrameAwardedtoLabel:SetText(WebDKP.translations.LogFrameAwardedtoLabel)WebDKP_LogFrameAmountLabel:SetText(WebDKP.translations.LogFrameAmountLabel)WebDKP_LogFrameReasonLabel:SetText(WebDKP.translations.LogFrameReasonLabel)WebDKP_LogFrameDateLabel:SetText(WebDKP.translations.LogFrameDateLabel)WebDKP_LogFrameCharChangeLabel:SetText(WebDKP.translations.LogFrameCharChangeLabel)WebDKP_LogFrameDelChar:SetText(WebDKP.translations.LogFrameDelChar)WebDKP_LogFrameAddChar:SetText(WebDKP.translations.LogFrameAddChar)WebDKP_LogFramePlayerFilterLabel:SetText(WebDKP.translations.LogFramePlayerFilterLabel)WebDKP_LogFramePlayerFilterOK:SetText(WebDKP.translations.LogFramePlayerFilterOK)WebDKP_LogFramePlayerFilterCancel:SetText(WebDKP.translations.LogFramePlayerFilterCancel)WebDKP_LogFrameSaveLog:SetText(WebDKP.translations.LogFrameSaveLog)WebDKP_OptionsFrameTitle:SetText(WebDKP.translations.WEBDKP_OPTIONSFRAME_TITLE)WebDKP_GeneralOptions_FrameTitle:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_TITLE)WebDKP_GeneralOptions_FrameInfo1:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_INFO1)WebDKP_GeneralOptions_FrameInfo2:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_INFO2)WebDKP_GeneralOptions_FrameInfo3:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_INFO3)WebDKP_GeneralOptions_FrameInfo4:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_INFO4)WebDKP_GeneralOptions_FrameInfo5:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_INFO5)WebDKP_GeneralOptions_FrameInfo6:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_INFO6)WebDKP_GeneralOptions_FrameInfo7:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_INFO7)WebDKP_GeneralOptions_FrameInfo8:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_INFO8)WebDKP_GeneralOptions_FrameToggleAutofillEnabledLabel:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_TOGGLEAUTOFILLENABLED_LABEL)WebDKP_GeneralOptions_FrameAutofillDropDownLabel:SetText(WebDKP.translations.GeneralOptions_FrameAutofillDropDownLabel)WebDKP_GeneralOptions_FrameToggleAutoAwardEnabledLabel:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_TOGGLEAUTOAWARDENABLED_LABEL)WebDKP_GeneralOptions_FrameToggleZeroSumEnabledLabel:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_TOGGLEZEROSUMENABLED_LABEL)WebDKP_GeneralOptions_FrameToggleAwardBossDKPLabel:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_TOGGLEAWARDBOSSDKP_LABEL)WebDKP_GeneralOptions_FrameToggleAwardBossDKP_Include_StandbyLabel:SetText(WebDKP.translations.FrameToggleAwardBossDKP_Include_StandbyLabel)WebDKP_GeneralOptions_FrameToggleAwardBossDKPIgnoreZeroLabel:SetText(WebDKP.translations.GeneralOptions_FrameToggleAwardBossDKPIgnoreZeroLabel)WebDKP_GeneralOptions_FrameToggleAltClickLabel:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_TOGGLEALTCLICK_LABEL)WebDKP_GeneralOptions_FrameToggleIgnWhispersLabel:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_TOGGLEIGNWHISPERS_LABEL)WebDKP_GeneralOptions_FrameToggledkpCapLabel:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_TOGGLEDKPCAP_LABEL)WebDKP_GeneralOptions_FramedkpCapLimitLabel:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_DKPCAPLIMIT_LABEL)WebDKP_GeneralOptions_FrameBossDKPMCAndOLLabel:SetText(WebDKP.translations.GeneralOptions_FrameBossDKPMCAndOLLabel)WebDKP_GeneralOptions_FrameBossDKPBWLLabel:SetText(WebDKP.translations.GeneralOptions_FrameBossDKPBWLLabel)WebDKP_GeneralOptions_FrameBossDKPTAQLabel:SetText(WebDKP.translations.GeneralOptions_FrameBossDKPTAQLabel)WebDKP_GeneralOptions_FrameBossDKPNAXXLabel:SetText(WebDKP.translations.GeneralOptions_FrameBossDKPNAXXLabel)WebDKP_GeneralOptions_FrameToggleEnabledLabel:SetText(WebDKP.translations.WEBDKP_GENERALOPTIONS_FRAME_TOGGLEENABLED_LABEL)WebDKP_BiddingOptions_FrameInfo1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_INFO1)WebDKP_BiddingOptions_FrameToggleBidAnnounceRaidLabel:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEBIDANNOUNCERAID_LABEL)WebDKP_BiddingOptions_FrameToggleBidConfirmPopupLabel:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEBIDCONFIRMPOPUP_LABEL)WebDKP_BiddingOptions_FrameToggleBidAllowNegativeBidsLabel1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEBIDALLOWNEGATIVEBIDS_LABEL1)WebDKP_BiddingOptions_FrameToggleBidAllowNegativeBidsLabel2:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEBIDALLOWNEGATIVEBIDS_LABEL2)WebDKP_BiddingOptions_FrameToggleBidFixedBiddingLabel1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEBIDFIXEDBIDDING_LABEL1)WebDKP_BiddingOptions_FrameToggleBidFixedBiddingLabel2:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEBIDFIXEDBIDDING_LABEL2)WebDKP_BiddingOptions_FrameToggleBidNotifyLowBidsLabel1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEBIDNOTIFYLOWBIDS_LABEL1)WebDKP_BiddingOptions_FrameToggleBidNotifyLowBidsLabel2:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEBIDNOTIFYLOWBIDS_LABEL2)WebDKP_BiddingOptions_FrameToggleAutoGiveLabel1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEAUTOGIVE_LABEL1)WebDKP_BiddingOptions_FrameToggleAutoGiveLabel2:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEAUTOGIVE_LABEL2)WebDKP_BiddingOptions_FrameToggleTurnBaseLabel1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLETURNBASE_LABEL1)WebDKP_BiddingOptions_FrameToggleTurnBaseLabel2:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLETURNBASE_LABEL2)WebDKP_BiddingOptions_FrameToggleSilentBiddingLabel1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLESILENTBIDDING_LABEL1)WebDKP_BiddingOptions_FrameToggleSilentBiddingLabel2:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLESILENTBIDDING_LABEL2)WebDKP_BiddingOptions_FrameToggleBidandRollLabel1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEBIDANDROLL_LABEL1)WebDKP_BiddingOptions_FrameToggleBidandRollLabel2:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEBIDANDROLL_LABEL2)WebDKP_BiddingOptions_FrameToggleAllNeedLabel1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEALLNEED_LABEL1)WebDKP_BiddingOptions_FrameToggleAllNeedLabel2:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEALLNEED_LABEL2)WebDKP_BiddingOptions_FrameNeedDKPLabel:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_NEEDDKP_LABEL)WebDKP_BiddingOptions_FrameToggleFiftyGreedLabel1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEFIFTYGREED_LABEL1)WebDKP_BiddingOptions_FrameToggleFiftyGreedLabel2:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEFIFTYGREED_LABEL2)WebDKP_BiddingOptions_FrameGreedDKPLabel:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_GREEDDKP_LABEL)WebDKP_BiddingOptions_FrameToggleDisableBidLabel1:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEDISABLEBID_LABEL1)WebDKP_BiddingOptions_FrameToggleDisableBidLabel2:SetText(WebDKP.translations.WEBDKP_BIDDINGOPTIONS_FRAME_TOGGLEDISABLEBID_LABEL2)WebDKP_AnnouncementsOptions_FrameInfo12:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_INFO12)WebDKP_AnnouncementsOptions_FrameInfo13:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_INFO13)WebDKP_AnnouncementsOptions_FrameInfo14:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_INFO14)WebDKP_AnnouncementsOptions_FrameInfo15:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_INFO15)WebDKP_AnnouncementsOptions_FrameInfo16:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_INFO16)WebDKP_AnnouncementsOptions_FrameInfo17:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_INFO17)WebDKP_AnnouncementsOptions_FrameInfo18:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_INFO18)WebDKP_AnnouncementsOptions_FrameToggleAnnouncementsLabel:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_TOGGLEANNOUNCEMENTS_LABEL)WebDKP_AnnouncementsOptions_FrameEditStartAnnounceLabel:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_EDITSTARTANNOUNCE_LABEL)WebDKP_AnnouncementsOptions_FrameEditDuringAnnounceLabel:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_EDITDURINGANNOUNCE_LABEL)WebDKP_AnnouncementsOptions_FrameEditEndAnnounceLabel:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_EDITENDANNOUNCE_LABEL)WebDKP_AnnouncementsOptions_FrameEditSRollAnnounceLabel:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_EDITSROLLANNOUNCE_LABEL)WebDKP_AnnouncementsOptions_FrameEditRollAnnounceLabel:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_EDITROLLANNOUNCE_LABEL)WebDKP_AnnouncementsOptions_FrameEditERollAnnounceLabel:SetText(WebDKP.translations.WEBDKP_ANNOUNCEMENTSOPTIONS_FRAME_EDITEROLLANNOUNCE_LABEL)WebDKP_OptionsFrameTab1:SetText(WebDKP.translations.WEBDKP_OPTIONSFRAME_TAB1)WebDKP_OptionsFrameTab2:SetText(WebDKP.translations.WEBDKP_OPTIONSFRAME_TAB2)WebDKP_OptionsFrameTab3:SetText(WebDKP.translations.WEBDKP_OPTIONSFRAME_TAB3)WebDKP_RaidInfoFrameTitle:SetText(WebDKP.translations.RaidInfoFrameTitle)WebDKP_RaidInfoFrameHeaderLog:SetText(WebDKP.translations.RaidInfoFrameHeaderLog)WebDKP_RaidInfoFrameHeaderAttended:SetText(WebDKP.translations.RaidInfoFrameHeaderAttended)WebDKP_RaidInfoFrameHeaderDirTime:SetText(WebDKP.translations.RaidInfoFrameHeaderDirTime)WebDKP_RaidInfoFrameHeaderDirChar:SetText(WebDKP.translations.RaidInfoFrameHeaderDirChar)WebDKP_RaidInfoFrameRaidLocationLabel:SetText(WebDKP.translations.RaidInfoFrameRaidLocationLabel)WebDKP_RaidInfoFramedateLabel:SetText(WebDKP.translations.RaidInfoFramedateLabel)WebDKP_RaidInfoFramestartTimeLabel:SetText(WebDKP.translations.RaidInfoFramestartTimeLabel)WebDKP_RaidInfoFrameendTimeLabel:SetText(WebDKP.translations.RaidInfoFrameendTimeLabel)WebDKP_RaidInfoFrametotaltimeLabel:SetText(WebDKP.translations.RaidInfoFrametotaltimeLabel)WebDKP_RaidInfoFrameStartRaid:SetText(WebDKP.translations.RaidInfoFrameStartRaid)WebDKP_RaidInfoFrameStopRaid:SetText(WebDKP.translations.RaidInfoFrameStopRaid)WebDKP_RaidInfoFrameDeleteRaid:SetText(WebDKP.translations.RaidInfoFrameDeleteRaid)WebDKP_RaidInfoFrameEndTimeLabel:SetText(WebDKP.translations.RaidInfoFrameEndTimeLabel)WebDKP_RaidInfoFrameAdjustTime:SetText(WebDKP.translations.RaidInfoFrameAdjustTime)WebDKP_RaidInfoFrameCharChangeLabel:SetText(WebDKP.translations.RaidInfoFrameCharChangeLabel)WebDKP_RaidInfoFrameAddChar:SetText(WebDKP.translations.RaidInfoFrameAddChar)WebDKP_RaidInfoFrameDelChar:SetText(WebDKP.translations.RaidInfoFrameDelChar)WebDKP_SynchFrameTitle:SetText(WebDKP.translations.SynchFrameTitle)WebDKP_SynchFrameText:SetText(WebDKP.translations.SynchFrameText)WebDKP_SynchFrameUsers:SetText(WebDKP.translations.SynchFrameUsers)WebDKP_SynchFrameNameLabel:SetText(WebDKP.translations.SynchFrameNameLabel)WebDKP_SynchFrameEnableSynchLabel:SetText(WebDKP.translations.SynchFrameEnableSynchLabel)WebDKP_SynchFramePasswordLabel:SetText(WebDKP.translations.SynchFramePasswordLabel)WebDKP_SynchFrameSynchFromLabel:SetText(WebDKP.translations.SynchFrameSynchFromLabel)WebDKP_SynchFrameSynchronize:SetText(WebDKP.translations.SynchFrameSynchronize)WebDKP_SynchFrameSynchAll:SetText(WebDKP.translations.SynchFrameSynchAll)WebDKP_SynchFrameAddSynchUserLabel:SetText(WebDKP.translations.SynchFrameAddSynchUserLabel)WebDKP_SynchFrameAddUser:SetText(WebDKP.translations.SynchFrameAddUser)WebDKP_SynchFrameDelUser:SetText(WebDKP.translations.SynchFrameDelUser)WebDKP_TimedAwardFrameTitle:SetText(WebDKP.translations.WEBDKP_TIMEDAWARDFRAME_TITLE)WebDKP_TimedAwardFrameText:SetText(WebDKP.translations.WEBDKP_TIMEDAWARDFRAME_TEXT)WebDKP_TimedAwardFrameDkpLabel:SetText(WebDKP.translations.WEBDKP_TIMEDAWARDFRAME_DKP_LABEL)WebDKP_TimedAwardFrameTimeLabel:SetText(WebDKP.translations.WEBDKP_TIMEDAWARDFRAME_TIME_LABEL)WebDKP_TimedAwardFrameTimeHint:SetText(WebDKP.translations.WEBDKP_TIMEDAWARDFRAME_TIME_HINT)WebDKP_TimedAwardFrameLoopTimerLabel:SetText(WebDKP.translations.WEBDKP_TIMEDAWARDFRAME_LOOPTIMER_LABEL)WebDKP_TimedAwardFrameResetButton:SetText(WebDKP.translations.WEBDKP_TIMEDAWARDFRAME_RESETBUTTON)WebDKP_TimedAwardFrameStartStopButton:SetText(WebDKP.translations.WEBDKP_TIMEDAWARDFRAME_STARTSTOPBUTTON)WebDKP_TimedAwardFrameMiniButton:SetText(WebDKP.translations.WEBDKP_TIMEDAWARDFRAME_MINIBUTTON)WebDKP_TimedAward_MiniFrameTimeLeft:SetText(WebDKP.translations.TimedAward_MiniFrameTimeLeft)WebDKP_WinTabFrameTab1:SetText(WebDKP.translations.WinTabFrameTab1)WebDKP_WinTabFrameTab2:SetText(WebDKP.translations.WinTabFrameTab2)WebDKP_WinTabFrameTab3:SetText(WebDKP.translations.WinTabFrameTab3)WebDKP_WinTabFrameTab4:SetText(WebDKP.translations.WinTabFrameTab4)WebDKP_WinTabFrameTab5:SetText(WebDKP.translations.WinTabFrameTab5)WebDKP_WinTabFrameTab6:SetText(WebDKP.translations.WinTabFrameTab6)WebDKP_WinTabFrameTab7:SetText(WebDKP.translations.WinTabFrameTab7)end